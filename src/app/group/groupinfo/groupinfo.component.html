<div class="row">
  <div class="col-sm-12">
    <div class="w3-center mt-3">
      <div class="container">
        <div class="row">
          <div class="col-sm-11">
            <h2>{{ retrieveGroupForm.get("groupName")?.value }}</h2>
          </div>
          <div class="col-sm-1"></div>
        </div>
      </div>
    </div>
    <div class="w3-responsive w3-card-4 mb-3">
      <form [formGroup]="retrieveGroupForm" class="m-2">
        <input
          class="w3-input w3-border w3-margin-bottom"
          type="hidden"
          #mentorId
          formControlName="mentorId"
        />
        <label for="groupName">Grup Adı:</label>
        <input
          class="w3-input w3-border w3-margin-bottom"
          type="text"
          #groupName
          readonly
          formControlName="groupName"
        />
        <label for="mentorEmail">Mentor:</label>
        <input
          class="w3-input w3-border w3-margin-bottom"
          type="text"
          #mentorEmail
          readonly
          formControlName="mentorEmail"
        />
        <label for="uesrs">Katılımcılar:</label>
        <ul class="list-group" *ngFor="let user of usersOfTheGroup">
          <li class="list-group-item">{{ user.email }}</li>
        </ul>
      </form>
    </div>
  </div>
</div>
<!-- ==========Etkinlikler================ -->
<div class="w3-center mt-3">
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <h2>Etkinlikler</h2>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 text-start">
        <h2>Pırlanta</h2>
      </div>
      <div class="w3-responsive w3-card-4 col-sm-12">
        <form [formGroup]="retrievePirForm" novalidate>
          <div
            *ngFor="let pir of pirs; let i = index"
            class="form-group row my-1"
          >
            <div class="col align-items-center">
              <span class="col-sm-1 text-start">{{ i + 1 }}-</span>
              <input
                class="col-sm-9 w3-button text-start text-sm-center"
                type="button"
                [value]="pir.name"
                [formControlName]="pir.name"
                [routerLink]="['/group/chapter/' + pir.pirId]"
              />
              <input
                *ngIf="allowedToAdminAndMentor"
                type="button"
                value="Seç"
                class="col-sm-2 text-end text-sm-center btn btn-warning"
                (click)="
                  selectPirToUpdate(pir); id_update_pir.style.display = 'block'
                "
              />
              <hr />
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- ========== Update Pir(MODAL) ========== -->
<div id="id_update_pir" class="w3-modal" #id_update_pir>
  <div
    class="w3-modal-content w3-card-4 w3-animate-zoom"
    style="max-width: 800px"
  >
    <div class="w3-center">
      <br />
      <span
        onclick="document.getElementById('id_update_pir').style.display='none'"
        class="w3-button w3-xlarge w3-transparent w3-display-topright"
        title="Close Modal"
        >×</span
      >
    </div>
    <form class="w3-container" [formGroup]="updatePirForm">
      <div class="w3-section">
        <label><b>Pırlanta adı:</b></label>
        <input
          class="w3-input w3-border w3-margin-bottom"
          type="text"
          formControlName="name"
        />
        <label><b>Açıklama:</b></label>
        <textarea
          rows="5"
          class="w3-input w3-border w3-margin-bottom"
          type="text"
          formControlName="description"
        >
        </textarea>
        <input type="hidden" formControlName="pirId" for="it gets just pirId" />
        <input
          type="hidden"
          formControlName="editorId"
          for="it gets just editorId"
        />
        <input type="hidden" formControlName="pirId" for="it gets just pirId" />
        <select class="form-select" formControlName="groupName">
          <option
            *ngFor="let group of mentorsMetoringGroups"
            [value]="group.groupId"
            [selected]="
              group.groupName === updatePirForm.get('groupName')?.value
            "
          >
            {{ group.groupName }}
          </option>
        </select>
        <button
          onclick="document.getElementById('id_update_pir').style.display='none'"
          (click)="updatePir()"
          class="w3-button w3-block w3-green w3-section w3-padding"
          type="submit"
          [disabled]="updatePirForm.pristine || updatePirForm.invalid"
        >
          Kaydet
        </button>
      </div>
    </form>
  </div>
</div>
<!-- ===============Popovers-Delete================= -->
<ng-template #popDeleteContent>
  <div class="text-center">
    <h4>Are you sure to delete {{ updatePirForm.controls["name"].value }}</h4>
    <button
      onclick="document.getElementById('id_update_pir').style.display='none'"
      type="button"
      class="btn btn-danger"
      style="margin-right: 10px"
    >
      Sil
    </button>
    <button type="button" class="btn btn-info">Vazgeç</button>
  </div>
</ng-template>
